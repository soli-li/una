# Una  

## 介绍  
基础管理框架

## 软件架构  
spring cloud + nacos(2.1.2) + redis(6.2+) + mysql(8+) or h2  
angular(13) + ngrx + ng-zorro-antd  

## 备注
- ### 动态配置项  
  有初始化和重置的密码生成规则、头像上传、session管理  
  所有配置起始为system-config均可在配置中心配置  
  1. 读取代码配置（作用范围为全局）
  2. 从配置中心获取对应值（作用范围为全局）
  3. 读取对应公司配置（作用范围仅为该公司）

  数字越大优先级越高

- ### 用户主动修改密码
  根据公司当前的密码策略配置执行

- ### 特殊主键
  permissions中存在以下特殊主键
  - superuser-add-data
  - not-include-company

  该数据不能删，是区分超级管理员与普通管理员唯一标识

- ### 缓存
  redis充当缓存使用，所以当第一次启动或在没有做持久化的重启，会丢失所有配置信息，需要使用超级管理员帐号登录，到配置页面进行“刷新配置”，以同步所有公司账号的配置
  
- ### TLS
  服务开启了mTLS，需要导入自定义ca证书jre中的cacerts文件
  
  现在的cert只对本地地址(127.0.0.1)有效，因为注册到nacos时可能会涉及多地址，那么可能需要重新生成cert，生成相关命令在/backend/una-top/key.md